(function(P){P.extend(!0,window,{Slick:{Data:{DataView:function(h){function b(a){for(var c=a||0,d=f.length;c<d;c++){a=f[c][r];if(void 0===a)throw"Each data element must implement a unique 'id' property";p[a]=c}}function H(){var a=k?Math.max(1,Math.ceil(t/k)):1;return{pageSize:k,pageNum:s,totalRows:t,totalPages:a}}function Q(a,c){A=c;B=a;C=null;!1===c&&f.reverse();f.sort(a);!1===c&&f.reverse();p={};b();i()}function R(a,c){A=c;C=a;B=null;var d=Object.prototype.toString;Object.prototype.toString="function"==
typeof a?a:function(){return this[a]};!1===c&&f.reverse();f.sort();Object.prototype.toString=d;!1===c&&f.reverse();p={};b();i()}function I(){if(!w){w={};for(var a=0,c=n.length;a<c;a++)w[n[a][r]]=a}}function J(a){a=a.toString().match(/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/);return{params:a[1].split(","),body:a[2]}}function $(a,c){for(var d=[],b=0,g=0,e=a.length;g<e;g++)v(a[g],c)&&(d[b++]=a[g]);return d}function aa(a,c,d){for(var b=[],g=0,e,j=0,l=a.length;j<l;j++)e=a[j],d[j]?b[g++]=e:v(e,c)&&(b[g++]=
e,d[j]=!0);return b}function S(a){w=null;if(m.isFilterNarrowing!=K.isFilterNarrowing||m.isFilterExpanding!=K.isFilterExpanding)T=[];if(v){var c=h.inlineFilters?U:$,d=h.inlineFilters?V:aa;m.isFilterNarrowing?q=c(q,D):m.isFilterExpanding?q=d(a,D,T):m.isFilterUnchanged||(q=c(a,D))}else q=k?a:a.concat();k?(q.length<s*k&&(s=Math.floor(q.length/k)),c=q.slice(k*s,k*s+k)):c=q;t=a=q.length;a=c;u=[];if(null!=y){for(var c=a,b,g=[],e=[],j,l=0,f=c.length;l<f;l++)j=c[l],b=(b=W?y(j):j[y])||0,d=e[b],d||(d=new Slick.Group,
d.count=0,d.value=b,d.rows=[],g[g.length]=d,e[b]=d),d.rows[d.count++]=j;u=g;if(u.length){a=u;for(c=a.length;c--;)d=a[c],d.collapsed=d.value in E,d.title=L?L(d):d.value;if(x){a=u;for(c=a.length;c--;)if(d=a[c],!d.collapsed||F){b=new Slick.GroupTotals;g=void 0;for(e=x.length;e--;)g=x[e],g.init(),M[e].call(g,d.rows),g.storeResult(b);b.group=d;d.totals=b}}u.sort(X);a=u;c=[];g=d=0;for(e=a.length;g<e;g++){b=a[g];c[d++]=b;if(!b.collapsed){j=0;for(l=b.rows.length;j<l;j++)c[d++]=b.rows[j]}if(b.totals&&(!b.collapsed||
F))c[d++]=b.totals}a=c}}var c=n,d=a,i;b=[];e=0;g=d.length;m&&m.ignoreDiffsBefore&&(e=Math.max(0,Math.min(d.length,m.ignoreDiffsBefore)));m&&m.ignoreDiffsAfter&&(g=Math.min(d.length,Math.max(0,m.ignoreDiffsAfter)));l=e;for(f=c.length;l<g;l++)if(l>=f)b[b.length]=l;else if(e=d[l],j=c[l],y&&(i=e.__nonDataRow||j.__nonDataRow)&&e.__group!==j.__group||e.__updated||e.__group&&!e.equals(j)||x&&i&&(e.__groupTotals||j.__groupTotals)||e[r]!=j[r]||z&&z[e[r]])b[b.length]=l;n=a;return b}function i(){if(!N){var a=
n.length,c=t,b=S(f,v);k&&t<s*k&&(s=Math.max(0,Math.ceil(t/k)-1),b=S(f,v));z=null;K=m;m={};c!=t&&O.notify(H(),null,G);a!=n.length&&Y.notify({previous:a,current:n.length},null,G);0<b.length&&Z.notify({rows:b},null,G)}}var G=this,r="id",f=[],n=[],p={},w=null,v=null,z=null,N=!1,A=!0,C,B,m={},K={},D,q=[],U,V,T=[],y,W,L,X,u=[],E={},x,F=!1,M,k=0,s=0,t=0,Y=new Slick.Event,Z=new Slick.Event,O=new Slick.Event,h=P.extend(!0,{},{groupItemMetadataProvider:null,inlineFilters:!1},h);return{beginUpdate:function(){N=
!0},endUpdate:function(){N=!1;i()},setPagingOptions:function(a){void 0!=a.pageSize&&(s=(k=a.pageSize)?Math.min(s,Math.max(0,Math.ceil(t/k)-1)):0);void 0!=a.pageNum&&(s=Math.min(a.pageNum,Math.max(0,Math.ceil(t/k)-1)));O.notify(H(),null,G);i()},getPagingInfo:H,getItems:function(){return f},setItems:function(a,c){void 0!==c&&(r=c);f=q=a;p={};b();for(var d,h=0,g=f.length;h<g;h++)if(d=f[h][r],void 0===d||p[d]!==h)throw"Each data element must implement a unique 'id' property";i()},setFilter:function(a){v=
a;if(h.inlineFilters){var a=J(v),c=a.body.replace(/return false[;}]/gi,"{ continue _coreloop; }").replace(/return true[;}]/gi,"{ _retval[_idx++] = $item$; continue _coreloop; }").replace(/return ([^;}]+?);/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }"),c="var _retval = [], _idx = 0; var $item$, $args$ = _args; _coreloop: for (var _i = 0, _il = _items.length; _i < _il; _i++) { $item$ = _items[_i]; $filter$; } return _retval; ".replace(/\$filter\$/gi,c),c=c.replace(/\$item\$/gi,
a.params[0]),c=c.replace(/\$args\$/gi,a.params[1]),a=new Function("_items,_args",c);a.displayName=a.name="compiledFilter";U=a;a=J(v);c=a.body.replace(/return false[;}]/gi,"{ continue _coreloop; }").replace(/return true[;}]/gi,"{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }").replace(/return ([^;}]+?);/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }");c="var _retval = [], _idx = 0; var $item$, $args$ = _args; _coreloop: for (var _i = 0, _il = _items.length; _i < _il; _i++) { $item$ = _items[_i]; if (_cache[_i]) { _retval[_idx++] = $item$; continue _coreloop; } $filter$; } return _retval; ".replace(/\$filter\$/gi,
c);c=c.replace(/\$item\$/gi,a.params[0]);c=c.replace(/\$args\$/gi,a.params[1]);a=new Function("_items,_args,_cache",c);a.displayName=a.name="compiledFilterWithCaching";V=a}i()},sort:Q,fastSort:R,reSort:function(){B?Q(B,A):C&&R(C,A)},groupBy:function(a,c,b){h.groupItemMetadataProvider||(h.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider);y=a;W="function"===typeof y;L=c;X=b;E={};u=[];i()},setAggregators:function(a,c){x=a;F=void 0!==c?c:F;M=[];for(var b=x.length;b--;){var f=M,g=b,e=
J(x[b].accumulate),e=new Function("_items","for (var "+e.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+e.params[0]+" = _items[_i]; "+e.body+"}");e.displayName=e.name="compiledAccumulatorLoop";f[g]=e}i()},collapseGroup:function(a){E[a]=!0;i()},expandGroup:function(a){delete E[a];i()},getGroups:function(){return u},getIdxById:function(a){return p[a]},getRowById:function(a){I();return w[a]},getItemById:function(a){return f[p[a]]},getItemByIdx:function(a){return f[a]},mapRowsToIds:function(a){for(var b=
[],d=0;d<a.length;d++)a[d]<n.length&&(b[b.length]=n[a[d]][r]);return b},mapIdsToRows:function(a){var b=[];I();for(var d=0;d<a.length;d++){var f=w[a[d]];null!=f&&(b[b.length]=f)}return b},setRefreshHints:function(a){m=a},setFilterArgs:function(a){D=a},refresh:i,updateItem:function(a,b){if(void 0===p[a]||a!==b[r])throw"Invalid or non-matching id";f[p[a]]=b;z||(z={});z[a]=!0;i()},insertItem:function(a,c){f.splice(a,0,c);b(a);i()},addItem:function(a){f.push(a);b(f.length-1);i()},deleteItem:function(a){var c=
p[a];if(void 0===c)throw"Invalid id";delete p[a];f.splice(c,1);b(c);i()},syncGridSelection:function(a,b){function d(){if(0<g.length){e=!0;var d=f.mapIdsToRows(g);b||(g=f.mapRowsToIds(d));a.setSelectedRows(d);e=!1}}var f=this,g=f.mapRowsToIds(a.getSelectedRows()),e;a.onSelectedRowsChanged.subscribe(function(){e||(g=f.mapRowsToIds(a.getSelectedRows()))});this.onRowsChanged.subscribe(d);this.onRowCountChanged.subscribe(d)},syncGridCellCssStyles:function(a,b){function d(a){g={};for(var b in a)g[n[b][r]]=
a[b]}function f(){if(g){e=!0;I();var d={},h;for(h in g){var i=w[h];void 0!=i&&(d[i]=g[h])}a.setCellCssStyles(b,d);e=!1}}var g,e;d(a.getCellCssStyles(b));a.onCellCssStylesChanged.subscribe(function(a,f){e||b==f.key&&f.hash&&d(f.hash)});this.onRowsChanged.subscribe(f);this.onRowCountChanged.subscribe(f)},getLength:function(){return n.length},getItem:function(a){return n[a]},getItemMetadata:function(a){a=n[a];return void 0===a?null:a.__group?h.groupItemMetadataProvider.getGroupRowMetadata(a):a.__groupTotals?
h.groupItemMetadataProvider.getTotalsRowMetadata(a):h.groupItemMetadataProvider?h.groupItemMetadataProvider.getRowMetadata(a):null},onRowCountChanged:Y,onRowsChanged:Z,onPagingInfoChanged:O}},Aggregators:{Avg:function(h){this.field_=h;this.init=function(){this.sum_=this.nonNullCount_=this.count_=0};this.accumulate=function(b){b=b[this.field_];this.count_++;null!=b&&(""!=b&&NaN!=b)&&(this.nonNullCount_++,this.sum_+=parseFloat(b))};this.storeResult=function(b){b.avg||(b.avg={});0!=this.nonNullCount_&&
(b.avg[this.field_]=this.sum_/this.nonNullCount_)}},Min:function(h){this.field_=h;this.init=function(){this.min_=null};this.accumulate=function(b){b=b[this.field_];if(null!=b&&(""!=b&&NaN!=b)&&(null==this.min_||b<this.min_))this.min_=b};this.storeResult=function(b){b.min||(b.min={});b.min[this.field_]=this.min_}},Max:function(h){this.field_=h;this.init=function(){this.max_=null};this.accumulate=function(b){b=b[this.field_];if(null!=b&&(""!=b&&NaN!=b)&&(null==this.max_||b>this.max_))this.max_=b};this.storeResult=
function(b){b.max||(b.max={});b.max[this.field_]=this.max_}},Sum:function(h){this.field_=h;this.init=function(){this.sum_=null};this.accumulate=function(b){b=b[this.field_];null!=b&&(""!=b&&NaN!=b)&&(this.sum_+=parseFloat(b))};this.storeResult=function(b){b.sum||(b.sum={});b.sum[this.field_]=this.sum_}}}}}})})(jQuery);
